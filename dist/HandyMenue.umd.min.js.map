{"version":3,"file":"HandyMenue.umd.min.js","sources":["../node_modules/qway/dist/qway.esm.js","../node_modules/eyeejs/dist/eye.esm.js","../src/HandyMenue.js"],"sourcesContent":["/**\r\n * Qway.js 3.0.0\r\n *\r\n * Copyright 2018, yousef neji\r\n * Licensed under the MIT license.\r\n */\r\n/**\r\n * @tutorial introduction\r\n * there is so many types of shortcut we offer:\r\n *  - `shortcut` : ordinary known one\r\n *  - `combo` : used mostly in games like cheat code a string you must tap very quickly and once\r\n * you fully tap a function that going to execute at the end resulting in a completed mission\r\n * or something like that\r\n *  - `holdAction` : occurs when you hold a key for a duration resulting in a function that execute\r\n * at the end.\r\n *\r\n * the syntax to bind each type deffers like so:\r\n *  to bind a normal shortcut you must pass a string constraint a keys list seperated by a `+` sign\r\n *  to bind a combo you must pass a string of keys list seperated by `,` comma\r\n *  to bind a holdAction you pass a string in this form ` (key) => (duration) `. the spaces added only for clarity also the parenthese\r\n *  the syntax of a hold action constrained out of a key then `=>` then the duration of holding in milliseconds.\r\n *\r\n *\r\n * Should not that not all shortcut will be allowed some shortcut could be used by default in the used browser\r\n * all thought the system will try to block this default one but some of them may still work like ctrl+t which open\r\n * new tab and other ones.\r\n *\r\n *\r\n * Tricks:\r\n * here is a simple trick, what to do if I just want to stop a default keybinding like (ctrl+r) that does\r\n * the window reload, you can simply assing to this shortcut a enmpty callback like that `qway.bind('ctrl+r')` you don't really\r\n * have to pass a callback as a qway empty optimal generated callback will be there for you.\r\n */\r\n\r\n// fixed bug in version 2.0.0\r\n// the library stop all my other callbacks to ceratin event such as mousedown event\r\n// mouse up event\r\n// and window blur event\r\n\r\n// for major support those steps must be implimented\r\nif ([].findIndex === undefined) {\r\n  Array.prototype[\"findIndex\"] = function (callback) {\r\n    var res = -1;\r\n    for (let i = 0; i < this.length; i++) {\r\n      const element = this[i];\r\n      out = callback(element, i, this);\r\n      if (out === true) {\r\n        res = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n}\r\n\r\n/**\r\n * Interface allows to handle setting up shortcut and combo keys for you app game or even\r\n * website very easily.\r\n * @author Yousef Neji\r\n * @param {boolean} duplicates default false, whether more then one callback for the same\r\n * shortcut allowed or not!\r\n */\r\nfunction Qway(duplicates = false) {\r\n  var _this = this;\r\n\r\n  /**\r\n   * Holds the defined shortcuts list, to add new shortcut use `bind`.\r\n   * @type {Array}\r\n   */\r\n  this.shortcutslist = [];\r\n\r\n  /**\r\n   * Holds the defined combo list, to new combo use `bind`.\r\n   * @type {Array}\r\n   */\r\n  this.combo = [];\r\n\r\n  /**\r\n   * Holds the callback to be executing when pressing certain key for a given duration\r\n   * @type {Array}\r\n   */\r\n  this.holdingActions = [];\r\n\r\n  /**\r\n   * Flag determine whether assinging more then one callback to the same shortcut\r\n   * is allowed or not\r\n   * @type {boolean}\r\n   */\r\n  this.duplicates = duplicates;\r\n\r\n  /**\r\n   * Holds the different allowed keys to form the sortcut\r\n   * @type {Array}\r\n   */\r\n  this.KEYS = [\r\n    \"command\" /*For Mac OS*/,\r\n    \"ctrl\",\r\n    \"shift\",\r\n    \"alt\",\r\n    \"altGraph\",\r\n    \"capslock\",\r\n    \"tab\",\r\n    \"backspace\",\r\n    \"enter\",\r\n    \"meta\",\r\n    \"space\",\r\n    \"escape\",\r\n    \"pageup\",\r\n    \"pagedown\",\r\n    \"home\",\r\n    \"insert\",\r\n    \"delete\",\r\n    \"end\",\r\n    \"arrowup\",\r\n    \"arrowdown\",\r\n    \"arrowleft\",\r\n    \"arrowright\",\r\n    \"1\",\r\n    \"2\",\r\n    \"3\",\r\n    \"4\",\r\n    \"5\",\r\n    \"6\",\r\n    \"7\",\r\n    \"8\",\r\n    \"9\",\r\n    \"0\",\r\n    \"a\",\r\n    \"b\",\r\n    \"c\",\r\n    \"d\",\r\n    \"e\",\r\n    \"f\",\r\n    \"g\",\r\n    \"h\",\r\n    \"i\",\r\n    \"j\",\r\n    \"k\",\r\n    \"l\",\r\n    \"m\",\r\n    \"n\",\r\n    \"o\",\r\n    \"p\",\r\n    \"q\",\r\n    \"r\",\r\n    \"s\",\r\n    \"t\",\r\n    \"u\",\r\n    \"v\",\r\n    \"w\",\r\n    \"x\",\r\n    \"y\",\r\n    \"z\",\r\n    \"*\",\r\n    \"f1\",\r\n    \"f2\",\r\n    \"f3\",\r\n    \"f4\",\r\n    \"f5\",\r\n    \"f6\",\r\n    \"f7\",\r\n    \"f8\",\r\n    \"f9\",\r\n    \"f10\",\r\n    \"f11\",\r\n  ];\r\n\r\n  /**\r\n   * Get or set shortcut activation state\r\n   * @type {boolean}\r\n   */\r\n  this.shortcutActivated = true;\r\n\r\n  /**\r\n   * Get or set combo activation state\r\n   * @type {boolean}\r\n   */\r\n  this.comboActivated = true;\r\n\r\n  /**\r\n   * Flag determine whether the user currently in interactive mode or not,\r\n   * must not get changed!\r\n   * @readonly\r\n   * @type {boolean}\r\n   */\r\n  this.intercativeMode = false;\r\n\r\n  /**\r\n   * Used in the interactive mode to hold the shortcut that going to be builded\r\n   * @type {Array<Array>}\r\n   */\r\n  this.toBuild = [[], []];\r\n\r\n  /**\r\n   * QEF or Qway Escape Function is the rescue function when ever a shortcut was created without it callback.\r\n   * @readonly\r\n   * @type {function}\r\n   */\r\n  this.QEF = function () {};\r\n\r\n  /**\r\n   * Holds the keys states whether they are pressed or not.\r\n   * @readonly\r\n   */\r\n  this.keysuite = {};\r\n\r\n  // packing up\r\n  window.addEventListener(\"keydown\", function (e) {\r\n    _this.handleKeydown.call(_this, e);\r\n  });\r\n  window.addEventListener(\"keyup\", function (e) {\r\n    _this.handleKeyup.call(_this, e);\r\n  });\r\n  window.addEventListener(\"blur\", function () {\r\n    _this.blur.call(_this);\r\n  });\r\n}\r\n\r\nQway.prototype = {\r\n  /**\r\n   * Approve binding the user created shortcut in interactive mode.\r\n   * @method Qway#applyReplace\r\n   * @returns {string} the shortcut that currently was approved.\r\n   */\r\n  approve: function () {\r\n    if (this.toBuild[0].length === 0) return;\r\n\r\n    var shortcut = this.toBuild[0].join(\"+\");\r\n    var callback = this.toBuild[1][1];\r\n\r\n    this.bind(shortcut, callback);\r\n\r\n    this.toBuild = [[], []];\r\n    return shortcut;\r\n  },\r\n  /**\r\n   * Approve replacing the given `callback` shortcut by the user defined one.\r\n   * @method Qway#approveToReplace\r\n   * @returns {boolean} true if replacing went well or false otherwise.\r\n   */\r\n  approveToReplace: function () {\r\n    if (this.toBuild[0].length === 0) return;\r\n\r\n    var shortcut = this.toBuild[0];\r\n    var callback = this.toBuild[1][1];\r\n\r\n    var obj = this.shortcutslist.find(\r\n      (a) => a.callback.toString() === callback.toString()\r\n    );\r\n    let exist = this.check(shortcut.join(\"+\")) !== -1;\r\n\r\n    if (obj !== undefined && !exist) {\r\n      this.unbind(obj.shortcut.join(\"+\"), obj.callback);\r\n      var res = this.bind(shortcut.join(\"+\"), this.toBuild[1][1]);\r\n\r\n      this.toBuild = [[], []];\r\n      this.intercativeMode = false;\r\n      return res === false ? res : shortcut;\r\n    }\r\n    this.toBuild = [[], []];\r\n    this.intercativeMode = false;\r\n    return false;\r\n  },\r\n  /**\r\n   * Abort the interactive process emptying the system from the temporary saved\r\n   * user interaction data(shortcut), invoked internally by the system.\r\n   * @method Qway#abort\r\n   */\r\n  abort: function () {\r\n    this.intercativeMode = false;\r\n    this.toBuild = [[], []];\r\n  },\r\n  /**\r\n   * Reset the progress of the combo with the given string and callback.\r\n   * @method Qway#resetCombo\r\n   * @param {string} combo\r\n   * @param {function} callback (optional)\r\n   */\r\n  resetCombo: function (combo, callback) {\r\n    combo = this.supervise(combo).join(\",\");\r\n\r\n    var index = this.combo.findIndex(\r\n      (a) =>\r\n        a.combo.join(\",\") === combo &&\r\n        (callback === undefined ||\r\n          (callback !== undefined &&\r\n            a.callback.toString() === callback.toString()))\r\n    );\r\n\r\n    if (index !== -1) {\r\n      this.combo[index].progress = \"\";\r\n      this.combo[index].done = false;\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * Toggle the activation state of a combo with the given string and callback\r\n   * @method Qway#toggleCombo\r\n   * @param {string} combo\r\n   * @param {function} callback (optional)\r\n   * @param {boolean} state (optional) if you want to force true or false\r\n   * @returns {boolean} true if toggling went well or false otherwise\r\n   */\r\n  toggleCombo: function (combo, callback, state) {\r\n    combo = this.supervise(combo).join(\",\");\r\n\r\n    var index = this.combo.findIndex(\r\n      (a) =>\r\n        a.combo.join(\",\") === combo &&\r\n        (callback === undefined ||\r\n          (callback !== undefined &&\r\n            a.callback.toString() === callback.toString()))\r\n    );\r\n\r\n    if (index !== -1) {\r\n      if (typeof state === \"boolean\") {\r\n        this.combo[index].active = state;\r\n      } else {\r\n        this.combo[index].active = !this.combo[index].active;\r\n      }\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * Toggle the activation state of a shortcut with the given string and callback\r\n   * @method Qway#toggleCombo\r\n   * @param {string} combo\r\n   * @param {function} callback (optional)\r\n   * @param {boolean} state (optional) if you want to force true or false\r\n   * @returns {boolean} true if toggling went well or false otherwise\r\n   */\r\n  toggleShortcut: function (shortcut, callback, state) {\r\n    shortcut = this.supervise(shortcut).join(\"+\");\r\n\r\n    var index = this.shortcutslist.findIndex(\r\n      (a) =>\r\n        a.shortcut.join(\"+\") === shortcut &&\r\n        (callback === undefined ||\r\n          (callback !== undefined &&\r\n            callback.toString() === a.callback.toString()))\r\n    );\r\n\r\n    if (index !== -1) {\r\n      if (typeof state === \"boolean\") {\r\n        this.shortcutslist[index].active = state;\r\n      } else {\r\n        this.shortcutslist[index].active = !this.shortcutslist[index].active;\r\n      }\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * Replace the shortcut of the given callback to new one\r\n   * @method Qway#replace\r\n   * @param {function} callback\r\n   * @param {string} shortcut\r\n   * @returns {boolean}  true if shortcut replaced successfully or false otherwise\r\n   */\r\n  replace: function (callback, shortcut) {\r\n    var index = this.shortcutslist.find(\r\n      (a) =>\r\n        a.callback !== undefined &&\r\n        a.callback.toString() === callback.toString()\r\n    );\r\n\r\n    if (index !== undefined) {\r\n      this.unbind(index.shortcut.join(\"+\"), index.callback);\r\n      return this.bind(shortcut, callback);\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * Interactivly getting the shortcut through the user clicks, this is usefull when\r\n   * designing the settings of your app, allowing the user to set up his own shortcut.\r\n   * @method Qway#getFromUser\r\n   * @param {number} shortcutLength the shortcut accepeted key count\r\n   * @param {function} callback\r\n   * @param {function} func1 this function will be excuted each time the user press or release\r\n   * a key while in creating the shortcut, it helps keep supervising the events!\r\n   */\r\n  getFromUser: function (shortcutLength, callback, func1) {\r\n    this.intercativeMode = true;\r\n    this.toBuild[1].push(shortcutLength, callback, func1);\r\n  },\r\n  /**\r\n   * Stop the interactive mode, getting the shortcut from the user\r\n   * @method Qway#stopGettingFromUser\r\n   */\r\n  stopGettingFromUser: function () {\r\n    this.intercativeMode = false;\r\n    this.toBuild = [[], []];\r\n  },\r\n  /**\r\n   * Invoked internally to cancel a shortcut\r\n   * @method Qway#handleKeyup\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  handleKeyup: function (e) {\r\n    var key = e.key.toLowerCase();\r\n    key = key === \" \" ? \"space\" : key.trim();\r\n    key = key === \"control\" ? \"ctrl\" : key;\r\n    this.keysuite[key] = false;\r\n\r\n    if (this.intercativeMode === false) {\r\n      if (this.shortcutslist.length !== 0) {\r\n        if (this.shortcutActivated === false) return;\r\n\r\n        this.shortcutslist.forEach((item) => {\r\n          if (item.shortcut.indexOf(key) !== -1) {\r\n            var start = item.shortcut.indexOf(key);\r\n\r\n            for (let i = start; i < item.shortcut.length; i++) {\r\n              item.progress[i] = false;\r\n            }\r\n          }\r\n        });\r\n\r\n        if (this.holdingActions.length !== 0) {\r\n          this.holdingActions.forEach((item) => {\r\n            if (item.key === key && item.timeout !== null) {\r\n              clearTimeout(item.timeout);\r\n              item.timeout = null;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      if (this.combo.length !== 0 && this.comboActivated === true) {\r\n        // this is a figure for the content of the combo arrau to help visualize\r\n        // what happenings\r\n        //var obj = {\r\n        //    progress : '',\r\n        //    combo : combo,\r\n        //    callback : callback,\r\n        //    timing : timing,\r\n        //    timeout : null,\r\n        //    active : true\r\n        //}\r\n\r\n        this.combo.forEach((item, j) => {\r\n          if (\r\n            item.combo.indexOf(key) !== -1 &&\r\n            !item.done &&\r\n            item.active === true\r\n          ) {\r\n            e.preventDefault();\r\n\r\n            // first we increase the progress by the new `key`\r\n            item.progress += key;\r\n\r\n            // we clear the old execution timeout\r\n            if (item.timeout !== null) {\r\n              clearTimeout(item.timeout);\r\n            }\r\n\r\n            if (item.progress === item.combo.join(\"\")) {\r\n              // means we get the right string\r\n              item.done = true;\r\n            }\r\n\r\n            // now we execute the function\r\n            item.callback(item);\r\n\r\n            if (!item.done) {\r\n              item.timeout = setTimeout(function () {\r\n                item.progress = \"\";\r\n                item.callback(item);\r\n              }, item.timing);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // the interactive mode\r\n\r\n      var index = this.toBuild[0].findIndex((a) => a === key);\r\n      if (index !== -1) {\r\n        e.preventDefault();\r\n        this.toBuild[0].splice(index, 1);\r\n        this.toBuild[1][2](this.toBuild[0]);\r\n      }\r\n    }\r\n  },\r\n  /**\r\n   * Invoked internally by the library while performing the shortcut\r\n   * @method Qway#handleKeydown\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  handleKeydown: function (e) {\r\n    var key = e.key.toLowerCase();\r\n    key = key === \" \" ? \"space\" : key.trim();\r\n    key = key === \"control\" ? \"ctrl\" : key;\r\n    this.keysuite[key] = true;\r\n\r\n    if (this.intercativeMode === false) {\r\n      if (this.shortcutslist.length !== 0 && this.shortcutActivated === true) {\r\n        this.shortcutslist.forEach((item) => {\r\n          if (item.active === false) return;\r\n\r\n          if (item.shortcut[0] === \"*\") {\r\n            e.preventDefault();\r\n            item.progress[0] = true;\r\n          } else if (\r\n            item.progress.indexOf(true) !== -1 &&\r\n            item.shortcut[item.progress.lastIndexOf(true) + 1] == \"*\"\r\n          ) {\r\n            e.preventDefault();\r\n            item.progress[item.progress.lastIndexOf(true) + 1] = true;\r\n          }\r\n\r\n          //otherwise\r\n          if (item.shortcut.indexOf(key) !== -1) {\r\n            e.preventDefault();\r\n            if (\r\n              item.progress[item.shortcut.indexOf(key) - 1] === true ||\r\n              item.progress[item.shortcut.indexOf(key) - 1] === undefined\r\n            ) {\r\n              item.progress[item.shortcut.indexOf(key)] = true;\r\n            }\r\n          }\r\n\r\n          if (item.progress[item.progress.length - 1] === true) {\r\n            e.preventDefault();\r\n            item.progress[item.progress.length - 1] = false;\r\n            item.callback();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (this.holdingActions.length !== 0 && this.shortcutActivated === true) {\r\n        for (let i = 0; i < this.holdingActions.length; i++) {\r\n          const element = this.holdingActions[i];\r\n\r\n          if (key === element.key && element.timeout === null) {\r\n            e.preventDefault();\r\n            this.holdingActions[i].timeout = setTimeout(\r\n              element.callback,\r\n              element.duration\r\n            );\r\n          }\r\n        }\r\n      }\r\n    } else if (this.intercativeMode === true) {\r\n      // first we check if key is already in the shortcut or not\r\n      var alreadyThere = this.toBuild[0].findIndex((a) => a === key);\r\n      if (alreadyThere === -1) {\r\n        e.preventDefault();\r\n        // now we need to handle creating the shortcut through the user clicks\r\n        this.toBuild[0].push(key);\r\n        this.toBuild[1][2](this.toBuild[0]);\r\n\r\n        if (this.toBuild[0].length === this.toBuild[1][0]) {\r\n          // means if shortcut length is enough\r\n          // then stop enlarging it and record it\r\n          this.intercativeMode = false;\r\n          this.toBuild[1][2](this.toBuild[0], true);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  /**\r\n   * Bind new short cut with a callback, mainly use comma seperated list of keys to create a combo or\r\n   * seperated with `+` sign for ordinary shortcut.\r\n   * @method Qway#bind\r\n   * @param {string} shortcut the shortcut to bind\r\n   * @param {function} callback the callback to be excuted when shortcut performed, if none was passed then a default callback will be assigned\r\n   * @param {number} timing optional parameter defined the minimum time between key presses\r\n   * so the shortcut is performed!(only for combos)\r\n   */\r\n  bind: function (shortcut = \"ctrl+q\", callback, timing = 500) {\r\n    //do the check\r\n    if (typeof shortcut !== \"string\") {\r\n      console.warn(\"Qway warn you:\\nthe given shortcut not string!\");\r\n      return;\r\n    }\r\n    callback = typeof callback !== \"function\" ? this.QEF : callback;\r\n    timing = typeof timing !== \"number\" ? 500 : timing;\r\n\r\n    //take apart the shortcut and anlyse it\r\n    if (this.KEYS.indexOf(shortcut) !== -1) {\r\n      // means the shortcut is constrained out of one single key\r\n      var obj = {\r\n        shortcut: [shortcut],\r\n        progress: [false],\r\n        callback: callback,\r\n        active: true,\r\n      };\r\n      var index = this.check(shortcut);\r\n      if (index === -1 || this.duplicates) {\r\n        this.shortcutslist.push(obj);\r\n        return true;\r\n      }\r\n      return false;\r\n    } else if (shortcut.indexOf(\"+\") !== -1) {\r\n      var shortcuti = this.supervise(shortcut);\r\n      if (shortcut !== false) {\r\n        var obj = {\r\n          shortcut: shortcuti,\r\n          progress: new Array(shortcuti.length).fill(\r\n            false,\r\n            0,\r\n            shortcuti.length\r\n          ),\r\n          callback: callback,\r\n          active: true,\r\n        };\r\n\r\n        var index = this.check(shortcuti.join(\"+\"));\r\n        if (index === -1 || this.duplicates) {\r\n          this.shortcutslist.push(obj);\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return false;\r\n    } else if (shortcut.indexOf(\",\") !== -1) {\r\n      var combo = this.supervise(shortcut);\r\n\r\n      if (combo !== false) {\r\n        var obj = {\r\n          progress: \"\",\r\n          combo: combo,\r\n          done: false,\r\n          callback: callback,\r\n          timing: timing,\r\n          timeout: null,\r\n          active: true,\r\n        };\r\n        var index = this.check(combo.join(\",\"));\r\n        if (index === -1 || this.duplicates) {\r\n          this.combo.push(obj);\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return false;\r\n    } else if (shortcut.indexOf(\"=>\") !== -1) {\r\n      var shortcuti = this.supervise(shortcut);\r\n\r\n      if (shortcut !== false) {\r\n        var obj = {\r\n          key: shortcuti[0],\r\n          duration: shortcuti[1],\r\n          callback: callback,\r\n          timeout: null,\r\n        };\r\n        var index = this.check(shortcut);\r\n        if (index === -1 || this.duplicates) {\r\n          this.holdingActions.push(obj);\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return false;\r\n    } else {\r\n      return false;\r\n    }\r\n  },\r\n  /**\r\n   * Remove the shortcut associated to the given `callback`, do not pass any parameter to empty\r\n   * the whole system callback, shortcuts combo and also hold actions.\r\n   * more options :\r\n   *  - pass `,` as the shortcut and `all` as the callback(or undefined) to delete all the combo\r\n   *  - pass `+` as the shortcut and `all` as the callback(or undefined) to delete all the shortcuts\r\n   *  - pass `=>` as the shortcut and `all` as the callback(or undefined) to delete all the holding actions\r\n   *\r\n   * @method Qway#unbind\r\n   * @param {string} shortcut\r\n   * @param {function} callback\r\n   * @returns {boolean} true if shortcut successfully unbinded or false otherwise\r\n   */\r\n  unbind: function (shortcut, callback) {\r\n    if (shortcut === undefined) {\r\n      // passing undefined will empty the whole system\r\n      // all the defined shortcut holdingActions and combo\r\n      this.shortcutslist = [];\r\n      this.holdingActions = [];\r\n      this.combo = [];\r\n      return;\r\n    }\r\n\r\n    var findANDdeleted = false;\r\n    if (this.KEYS.indexOf(shortcut) !== -1) {\r\n      for (let i = this.shortcutslist.length - 1; i > -1; i--) {\r\n        const element = this.shortcutslist[i];\r\n\r\n        if (\r\n          ((callback !== undefined &&\r\n            element.callback.toString() === callback.toString()) ||\r\n            callback === undefined) &&\r\n          element.shortcut.join(\"\") === shortcut\r\n        ) {\r\n          this.shortcutslist.splice(i, 1);\r\n          findANDdeleted = true;\r\n        }\r\n      }\r\n    } else if (shortcut.indexOf(\"+\") !== -1) {\r\n      if (callback === \"all\" || (callback === undefined && shortcut === \"+\")) {\r\n        this.shortcutslist = [];\r\n        findANDdeleted = true;\r\n      } else {\r\n        shortcut = this.supervise(shortcut).join(\"+\");\r\n\r\n        for (let i = this.shortcutslist.length - 1; i > -1; i--) {\r\n          const element = this.shortcutslist[i];\r\n\r\n          if (\r\n            element.shortcut.join(\"+\") === shortcut &&\r\n            ((callback !== undefined &&\r\n              element.callback.toString() === callback.toString()) ||\r\n              callback === undefined)\r\n          ) {\r\n            this.shortcutslist.splice(i, 1);\r\n            findANDdeleted = true;\r\n          }\r\n        }\r\n      }\r\n    } else if (shortcut.indexOf(\",\") !== -1) {\r\n      if (callback === \"all\" || (callback === undefined && shortcut === \",\")) {\r\n        this.combo = [];\r\n        findANDdeleted = true;\r\n      } else {\r\n        shortcut = this.supervise(shortcut).join(\",\");\r\n\r\n        for (let i = this.combo.length - 1; i > -1; i--) {\r\n          const combo = this.combo[i];\r\n          if (\r\n            combo.combo.join(\",\") === shortcut &&\r\n            ((callback !== undefined &&\r\n              combo.callback.toString() === callback.toString()) ||\r\n              callback === undefined)\r\n          ) {\r\n            this.combo.splice(i, 1);\r\n            findANDdeleted = true;\r\n          }\r\n        }\r\n      }\r\n    } else if (shortcut.indexOf(\"=>\") !== -1) {\r\n      if (callback === \"all\" || (callback === undefined && shortcut === \"=>\")) {\r\n        this.holdingActions = [];\r\n        findANDdeleted = true;\r\n      } else {\r\n        shortcut = this.supervise(shortcut);\r\n\r\n        for (let i = this.holdingActions.length - 1; i > -1; i--) {\r\n          const action = this.holdingActions[i];\r\n\r\n          if (\r\n            action.key === shortcut[0] &&\r\n            action.duration === shortcut[1] &&\r\n            ((callback !== undefined &&\r\n              action.callback.toString() === callback.toString()) ||\r\n              callback === undefined)\r\n          ) {\r\n            this.holdingActions.splice(i, 1);\r\n            findANDdeleted = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return findANDdeleted;\r\n  },\r\n  /**\r\n   * Check whether shortcut/keysmap/holdAction already under use or not!\r\n   * @method Qway#check\r\n   * @param {string} shortcut\r\n   * @returns {number}\r\n   */\r\n  check: function (shortcut) {\r\n    if (shortcut.indexOf(\"+\") !== -1) {\r\n      return this.shortcutslist.findIndex(\r\n        (a) => a !== undefined && a.shortcut.join(\"+\") === shortcut\r\n      );\r\n    } else if (shortcut.indexOf(\",\") !== -1) {\r\n      return this.combo.findIndex(\r\n        (a) => a !== undefined && a.combo.join(\",\") === shortcut\r\n      );\r\n    } else if (shortcut.indexOf(\"=>\") !== -1) {\r\n      return this.holdingActions.findIndex(\r\n        (a) => a !== undefined && a.key === shortcut\r\n      );\r\n    } else {\r\n      return this.shortcutslist.findIndex(\r\n        (a) => a !== undefined && a.shortcut[0] === shortcut\r\n      );\r\n    }\r\n  },\r\n  /**\r\n   * Does check a shortcut whether is proper form and can be used or, a proper form shortcut\r\n   * contains only existing system keys, and only one type of seperator so it's type can be identified\r\n   * which could be:\r\n   *  - `shortcut` : if the keys seperator is `+` sign\r\n   *  - `combo` : if the keys seperator is `,`  comma\r\n   *  - `holdAction` : if the keys seperator is `=>` sign\r\n   *\r\n   * also the function does fix the shortcut in some parts!\r\n   * you don't usually invoke this function as it's used internally.\r\n   * @method Qway#supervise\r\n   * @param {string} shortcut\r\n   * @returns {Array} if shortcut fit the terms then it returned in an array otherwise\r\n   * false is returned!\r\n   */\r\n  supervise: function (shortcut) {\r\n    if (\r\n      shortcut.indexOf(\",\") !== -1 &&\r\n      (shortcut.indexOf(\"+\") !== -1 || shortcut.indexOf(\"=>\") !== -1)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      shortcut.indexOf(\"+\") !== -1 &&\r\n      (shortcut.indexOf(\",\") !== -1 || shortcut.indexOf(\"=>\") !== -1)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      shortcut.indexOf(\"=>\") !== -1 &&\r\n      (shortcut.indexOf(\"+\") !== -1 || shortcut.indexOf(\",\") !== -1)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    var error = false;\r\n\r\n    if (shortcut.indexOf(\"+\") !== -1) {\r\n      shortcut = shortcut.split(\"+\");\r\n      for (let i = 0; i < shortcut.length; i++) {\r\n        if (shortcut[i] === \"control\") {\r\n          shortcut[i] = \"ctrl\";\r\n        }\r\n\r\n        if (shortcut[i] === \" \") {\r\n          shortcut[i] = \"space\";\r\n        }\r\n\r\n        shortcut[i] = shortcut[i].toLowerCase();\r\n\r\n        if (this.KEYS.indexOf(shortcut[i]) === -1) {\r\n          error = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      return error ? false : shortcut;\r\n    } else if (shortcut.indexOf(\",\") !== -1) {\r\n      shortcut = shortcut.split(\",\");\r\n      var res = [];\r\n      for (let i = 0; i < shortcut.length; i++) {\r\n        var key;\r\n\r\n        key = shortcut[i] === \" \" ? \"space\" : shortcut[i].trim().toLowerCase();\r\n        key = key === \"control\" ? \"ctrl\" : key;\r\n\r\n        if (key.indexOf(\"*\") !== -1) {\r\n          key = key.split(\"*\");\r\n          times = parseFloat(key[1]);\r\n          name = key[0].trim();\r\n\r\n          if (this.KEYS.indexOf(name) === -1) {\r\n            error = true;\r\n            break;\r\n          }\r\n\r\n          for (let j = 0; j < times; j++) {\r\n            res.push(name);\r\n          }\r\n        } else {\r\n          res.push(key);\r\n          if (this.KEYS.indexOf(key) === -1) {\r\n            error = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return error ? false : res;\r\n    } else if (shortcut.indexOf(\"=>\") !== -1) {\r\n      shortcut = shortcut.split(\"=>\");\r\n      var duration = parseFloat(shortcut[1]);\r\n      var key = shortcut[0];\r\n\r\n      key = key === \" \" ? \"space\" : key.trim().toLowerCase();\r\n      key = key === \"control\" ? \"ctrl\" : key;\r\n\r\n      if (this.KEYS.indexOf(key) === -1) {\r\n        return false;\r\n      }\r\n\r\n      return this.KEYS.indexOf(key) === -1 ? false : [key, duration];\r\n    } else {\r\n      shortcut = shortcut === \" \" ? \"space\" : shortcut.trim().toLowerCase();\r\n      shortcut = shortcut === \"control\" ? \"ctrl\" : shortcut;\r\n\r\n      return this.KEYS.indexOf(shortcut) === -1\r\n        ? false\r\n        : {\r\n            shortcut: shortcut,\r\n            callback: null,\r\n          };\r\n    }\r\n  },\r\n  /**\r\n   * Returns an object that can be easily saved inside a JSON file, this helps saving\r\n   * the user preferences if you are creating an app!\r\n   *\r\n   * also the function `initiate` suppose to take as parameter the return of this function\r\n   * as to load back the state.\r\n   * @method Qway#pack\r\n   * @returns {object}\r\n   */\r\n  pack: function () {\r\n    return {\r\n      duplicates: this.duplicates,\r\n      shortcut: this.shortcutslist,\r\n      holdingActions: this.holdingActions,\r\n      shortcutActivated: this.shortcutActivated,\r\n      comboActivated: this.comboActivated,\r\n      combo: this.combo,\r\n    };\r\n  },\r\n  /**\r\n   * Load the shortcut list and the combo and all preferences from an object, usually this\r\n   * object is parsed from a JSON file, as to save and load back the state.\r\n   * @method Qway#initiate\r\n   * @param {object} obj\r\n   */\r\n  initiate: function (obj) {\r\n    this.duplicates = obj.duplicates || false;\r\n    this.shortcutslist = obj.shortcut || [];\r\n    this.combo = obj.combo || [];\r\n    this.holdingActions = obj.holdingActions || [];\r\n    this.comboActivated = obj.comboActivated || true;\r\n    this.shortcutActivated = obj.shortcutActivated || true;\r\n  },\r\n  /**\r\n   * Used to handle window blur event, invoked internally by the system\r\n   * @method Qway#blur\r\n   */\r\n  blur: function () {\r\n    for (let i = 0; i < this.shortcutslist.length; i++) {\r\n      this.shortcutslist[i].progress.fill(\r\n        false,\r\n        0,\r\n        this.shortcutslist[i].progress.length\r\n      );\r\n    }\r\n    for (let i = 0; i < this.combo.length; i++) {\r\n      this.combo[i].progress = \"\";\r\n    }\r\n    for (let i = 0; i < this.holdingActions.length; i++) {\r\n      if (this.holdingActions[i].timeout !== null) {\r\n        clearTimeout(this.holdingActions[i].timeout);\r\n        this.holdingActions[i].timeout = null;\r\n      }\r\n    }\r\n\r\n    this.intercativeMode = false;\r\n    this.toBuild = [[], []];\r\n  },\r\n};\n\nexport { Qway as default };\n//# sourceMappingURL=qway.esm.js.map\n","// import jcall from \"jcall\";\r\n\r\n/**\r\n * @typedef {Object} AttrMap\r\n * @property {HTMLDivElement} parent - append newly created element to a parent\r\n * @property {Array<String>|String} class - class or array of classes to set\r\n * @property {String} id - set element ID\r\n * @property {Object} data - dataset values to set\r\n * @property {String} text - set element text\r\n * @property {String} html - set element html\r\n * @property {{ request: String, data: Object, callback: Function}} refresh - attached a refreshable context\r\n *\r\n */\r\n\r\n/**\r\n * @typedef {Object} EyeElement\r\n * @property {(tag: String, attrs: AttrMap) => EyeElement} eye - The main function to create or select elements.\r\n * @property {(set_to?: string) => EyeElement} show - Show the element, optional customize the display value, inline-bloc, bloc.... .\r\n * @property {() => EyeElement} hide - Hide the element.\r\n * @property {(index: number) => EyeElement} child - Function to get a child element by index.\r\n * @property {(key: String, value: *) => EyeElement} refer - Set or get a hidden WeakMap attributes\r\n * @property {(key: String, subfind: number) => EyeElement} unrefer - Remove/unset a WeakMap attributes, optionally `subfind` it if array is set!\r\n * @property {(event: String, callback: Function) => EyeElement} on - Attach an event listener to `event`\r\n * @property {(parent: HTMLElement) => EyeElement} appendTo - Append this element to an other\r\n * @property {(key: String, value: String) => EyeElement|String} attr - Set or get a value of certain attribute\r\n * @property {(key: String, value: String) => EyeElement|string} css - Modify or get element style\r\n * @property {(key: string, value: string) => DOMStringMap|string} data - Set or get a dataset value of the attribute\r\n * @property {(value: String) => EyeElement|string} text - Set or get elements text content\r\n * @property {(value: String) => EyeElement|string} html - Set or get elements html content\r\n * @property {Function} [eventName] - Functions for various events (e.g., click, focus, etc.).\r\n * @property {boolean} isEyeInstance - Flag to check if the element is an Eye instance.\r\n * @property {(action: String, value: String, opt?: String)=> boolean} class - perform class manipulation\r\n * @property {*} refresh - under consrtuction\r\n */\r\n\r\nconst events = [\r\n  // Mouse Events\r\n  \"click\",\r\n  \"dblclick\",\r\n  \"mousedown\",\r\n  \"mouseup\",\r\n  \"mousemove\",\r\n  \"mouseenter\",\r\n  \"mouseleave\",\r\n  \"mouseover\",\r\n  \"mouseout\",\r\n  \"contextmenu\",\r\n\r\n  // Keyboard Events\r\n  \"keydown\",\r\n  \"keypress\", // Deprecated\r\n  \"keyup\",\r\n\r\n  // Focus Events\r\n  \"focus\",\r\n  \"blur\",\r\n  \"focusin\",\r\n  \"focusout\",\r\n\r\n  // Form Events\r\n  \"submit\",\r\n  \"change\",\r\n  \"input\",\r\n  \"reset\",\r\n  \"select\",\r\n\r\n  // Touch Events (for mobile)\r\n  \"touchstart\",\r\n  \"touchend\",\r\n  \"touchmove\",\r\n  \"touchcancel\",\r\n\r\n  // Pointer Events\r\n  \"pointerdown\",\r\n  \"pointerup\",\r\n  \"pointermove\",\r\n  \"pointerenter\",\r\n  \"pointerleave\",\r\n  \"pointercancel\",\r\n\r\n  // Drag and Drop Events\r\n  \"dragstart\",\r\n  \"dragend\",\r\n  \"dragenter\",\r\n  \"dragover\",\r\n  \"dragleave\",\r\n  \"drop\",\r\n\r\n  // Window/Document Events\r\n  \"resize\",\r\n  \"scroll\",\r\n  \"load\",\r\n  \"beforeunload\",\r\n  \"unload\",\r\n\r\n  // Media Events\r\n  \"play\",\r\n  \"pause\",\r\n  \"ended\",\r\n  \"volumechange\",\r\n  \"timeupdate\",\r\n\r\n  // Clipboard Events\r\n  \"copy\",\r\n  \"cut\",\r\n  \"paste\",\r\n\r\n  // Animation and Transition Events\r\n  \"animationstart\",\r\n  \"animationend\",\r\n  \"animationiteration\",\r\n  \"transitionstart\",\r\n  \"transitionend\",\r\n\r\n  // Mutation Events\r\n  \"DOMSubtreeModified\",\r\n  \"DOMNodeInserted\",\r\n  \"DOMNodeRemoved\",\r\n\r\n  // Other Events\r\n  \"error\",\r\n  \"hashchange\",\r\n  \"popstate\",\r\n];\r\n\r\nconst htmlElements = [\r\n  // Metadata\r\n  \"base\",\r\n  \"head\",\r\n  \"link\",\r\n  \"meta\",\r\n  \"style\",\r\n  \"title\",\r\n\r\n  // Sections\r\n  \"body\",\r\n  \"address\",\r\n  \"article\",\r\n  \"aside\",\r\n  \"footer\",\r\n  \"header\",\r\n  \"h1\",\r\n  \"h2\",\r\n  \"h3\",\r\n  \"h4\",\r\n  \"h5\",\r\n  \"h6\",\r\n  \"main\",\r\n  \"nav\",\r\n  \"section\",\r\n\r\n  // Text content\r\n  \"blockquote\",\r\n  \"dd\",\r\n  \"div\",\r\n  \"dl\",\r\n  \"dt\",\r\n  \"figcaption\",\r\n  \"figure\",\r\n  \"hr\",\r\n  \"li\",\r\n  \"ol\",\r\n  \"p\",\r\n  \"pre\",\r\n  \"ul\",\r\n\r\n  // Inline text semantics\r\n  \"a\",\r\n  \"abbr\",\r\n  \"b\",\r\n  \"bdi\",\r\n  \"bdo\",\r\n  \"br\",\r\n  \"cite\",\r\n  \"code\",\r\n  \"data\",\r\n  \"dfn\",\r\n  \"em\",\r\n  \"i\",\r\n  \"kbd\",\r\n  \"mark\",\r\n  \"q\",\r\n  \"rp\",\r\n  \"rt\",\r\n  \"ruby\",\r\n  \"s\",\r\n  \"samp\",\r\n  \"small\",\r\n  \"span\",\r\n  \"strong\",\r\n  \"sub\",\r\n  \"sup\",\r\n  \"time\",\r\n  \"u\",\r\n  \"var\",\r\n  \"wbr\",\r\n\r\n  // Image and multimedia\r\n  \"area\",\r\n  \"audio\",\r\n  \"img\",\r\n  \"map\",\r\n  \"track\",\r\n  \"video\",\r\n\r\n  // Embedded content\r\n  \"embed\",\r\n  \"iframe\",\r\n  \"object\",\r\n  \"picture\",\r\n  \"portal\",\r\n  \"source\",\r\n\r\n  // Scripting\r\n  \"canvas\",\r\n  \"noscript\",\r\n  \"script\",\r\n\r\n  // Demarcating edits\r\n  \"del\",\r\n  \"ins\",\r\n\r\n  // Table content\r\n  \"caption\",\r\n  \"col\",\r\n  \"colgroup\",\r\n  \"table\",\r\n  \"tbody\",\r\n  \"td\",\r\n  \"tfoot\",\r\n  \"th\",\r\n  \"thead\",\r\n  \"tr\",\r\n\r\n  // Forms\r\n  \"button\",\r\n  \"datalist\",\r\n  \"fieldset\",\r\n  \"form\",\r\n  \"input\",\r\n  \"label\",\r\n  \"legend\",\r\n  \"meter\",\r\n  \"optgroup\",\r\n  \"option\",\r\n  \"output\",\r\n  \"progress\",\r\n  \"select\",\r\n  \"textarea\",\r\n\r\n  // Interactive elements\r\n  \"details\",\r\n  \"dialog\",\r\n  \"summary\",\r\n\r\n  // Web components / scripting base\r\n  \"slot\",\r\n  \"template\",\r\n];\r\nconst hiddenAttributes = new WeakMap();\r\n\r\nfunction flat(word) {\r\n  let n = \"\";\r\n  for (let i = 0; i < word.length; i++) {\r\n    const t = word[i];\r\n    if (t === t.toUpperCase() && t !== t.toLowerCase()) n += \"-\" + t;\r\n    else n += t;\r\n  }\r\n  return n.toLowerCase();\r\n}\r\n/**\r\n * Creates or select nodes using css selectors, offering a pack of useful functions to use around your code!\r\n * @param {String} tag\r\n * @param {AttrMap} attrs\r\n * @param {*} css CSS styles to be applied to the element.\r\n * @returns\r\n */\r\nfunction eye(tag, attrs, css) {\r\n  if (css instanceof Array) children = css;\r\n  /**\r\n   * @type {EyeElement}\r\n   */\r\n  let elm,\r\n    selectFunc = \"querySelector\",\r\n    parent = this === undefined || this instanceof Window ? document : this;\r\n\r\n  if (tag instanceof HTMLElement) elm = tag;\r\n  else {\r\n    // there is three cases\r\n    if (attrs && attrs.all === true)\r\n      // CASE 1: parent is not docuement & all=true\r\n      selectFunc = \"querySelectorAll\";\r\n    if (parent == document && htmlElements.indexOf(tag) != -1)\r\n      // CASE 3: parent is document & user input a tag name\r\n      selectFunc = \"createElement\";\r\n\r\n    elm = parent[selectFunc](tag);\r\n  }\r\n\r\n  if (elm instanceof NodeList) {\r\n    elm.forEach((nd) => eye(nd));\r\n    // for nodelist there's some other available functions\r\n    return [...elm];\r\n  }\r\n\r\n  if (!elm) return null;\r\n  if (elm.isEyeInstance) return elm;\r\n\r\n  elm.isEyeInstance = true;\r\n  // adding a very special function\r\n  elm.eye = eye;\r\n\r\n  // adding the element itself\r\n  // usuage:\r\n  // item.set(\"id=menu-item\",\"contentEditable=true\",\"data-index=15\",...);\r\n  elm.set = function (value, ...args) {\r\n    args.push(value);\r\n    args.forEach((arg) => {\r\n      if (arg.indexOf(\"=\") != -1) {\r\n        const [key, val] = arg.split(\"=\");\r\n        if (key.indexOf(\"data-\") === 0) {\r\n          this.dataset[flat(key.replace(\"data-\", \"\"))] = val;\r\n        } else {\r\n          this.setAttribute(key, val);\r\n        }\r\n      } else if (arg.indexOf(\":\") != -1) {\r\n        const [key, val] = arg.split(\":\");\r\n        this.style[flat(key)] = val;\r\n      } else this.setAttribute(arg, \"\");\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  elm.class = function (actions) {\r\n    let vals = null;\r\n    if (typeof actions === \"number\") return elm.classList.item(actions);\r\n    \r\n    actions.split(\" \").forEach((action) => {\r\n      if (action[0] == \"-\") {\r\n        elm.classList.remove(action.substring(1, action.length));\r\n      } else if (action[0] == \"%\") {\r\n        elm.classList.toggle(action.substring(1, action.length));\r\n      } else if (action[0] == \"?\") {\r\n        vals = elm.classList.contains(action.substring(1, action.length));\r\n      } else if (action.indexOf(\"/\") != -1) {\r\n        [v1, v2] = action.split(\"/\");\r\n        elm.classList.replace(v1, v2);\r\n      } else {\r\n        elm.classList.add(action.substring(1, action.length));\r\n      }\r\n    });\r\n\r\n    return vals !== null ? vals : this;\r\n  };\r\n\r\n  elm.show = function (set_to) {\r\n    this.style.display = set_to || \"\";\r\n    return this;\r\n  };\r\n\r\n  elm.hide = function () {\r\n    this.style.display = \"none\";\r\n    return this;\r\n  };\r\n\r\n  elm.child = function (index) {\r\n    return this.children[index] ? eye(this.children[index]) : null;\r\n  };\r\n\r\n  elm.refer = function (key, value) {\r\n    if (value !== undefined) {\r\n      let attr = hiddenAttributes.get(this);\r\n      if (!attr) {\r\n        attr = {};\r\n        hiddenAttributes.set(this, attr);\r\n      }\r\n\r\n      // now a small check\r\n      if (value instanceof Array) {\r\n        // if value is instance of array means we're defining an array property of adding to one\r\n        if (attr[key] instanceof Array) attr[key].push(value[0]);\r\n        else attr[key] = [value[0]];\r\n      } else attr[key] = value;\r\n      return this;\r\n    } else return hiddenAttributes.get(this)?.[key];\r\n  };\r\n  elm.unrefer = function (key, subfind) {\r\n    let attr = hiddenAttributes.get(this);\r\n    if (attr) {\r\n      if (!subfind && typeof key === \"string\" && attr[key])\r\n        attr[key] = undefined;\r\n      else if (typeof subfind === \"function\" && attr[key] instanceof Array)\r\n        attr[key].forEach((item, i, arr) => {\r\n          if (subfind(item) === true) {\r\n            arr.splice(i, 1);\r\n            i--;\r\n          }\r\n        });\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // re-assinging events handling system\r\n  events.forEach((ev) => {\r\n    var old;\r\n    if (typeof elm[ev] == \"function\") {\r\n      old = elm[ev];\r\n    }\r\n    elm[ev] = function (cb) {\r\n      if (cb) {\r\n        if (typeof cb == \"function\") elm.addEventListener(ev, cb);\r\n      } else old.call(elm);\r\n      return this;\r\n    };\r\n  });\r\n\r\n  elm.on = function (evs, listener) {\r\n    evs = evs.split(\" \");\r\n    for (let j = 0; j < evs.length; j++) elm.addEventListener(evs[j], listener);\r\n    return this;\r\n  };\r\n\r\n  elm.appendTo = function (parent) {\r\n    if (parent) parent.append(this);\r\n    return this;\r\n  };\r\n\r\n  elm.attr = function (key, value) {\r\n    if (key) {\r\n      if (value){\r\n        if(value === false) this.removeAttribute(key);\r\n        this.setAttribute(key, value);\r\n      } else return this.getAttribute(key);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  elm.css = function (key, value) {\r\n    // usuage is wide customizable\r\n    if (key) {\r\n      if (value) elm.style[flat(key)] = value;\r\n      else return this.style[flat(key)];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  elm.data = function (key, value) {\r\n    if (key) {\r\n      if (value) this.dataset[key] = value;\r\n      else return this.dataset[key];\r\n    }\r\n    return this.dataset;\r\n  };\r\n\r\n  elm.text = function (value) {\r\n    if (value) this.textContent = value;\r\n    else return this.textContent;\r\n    return this;\r\n  };\r\n\r\n  elm.html = function (value) {\r\n    if (value) this.innerHTML = value;\r\n    else return this.innerHTML;\r\n    return this;\r\n  };\r\n\r\n  // setting attributes & css\r\n  let parentElm = null;\r\n  // let refresh = null;\r\n  if (attrs)\r\n    for (const key in attrs) {\r\n      const value = attrs[key];\r\n      if (key == \"class\")\r\n        elm.classList.add.apply(\r\n          elm.classList,\r\n          value instanceof Array ? value : [value]\r\n        );\r\n      else if (key == \"text\") elm.textContent = value;\r\n      else if (key == \"html\") elm.innerHTML = value;\r\n      else if (key == \"data\") for (const k in value) elm.dataset[k] = value[k];\r\n      else if (key == \"parent\") parentElm = value;\r\n      // else if (key == \"refresh\") refresh = value;\r\n      else if (key in elm) elm[key] = value;\r\n      else elm.setAttribute(key, elm);\r\n    }\r\n  if (css)\r\n    for (const key in css)\r\n      if (key.indexOf(\"-\") != -1) elm.style[key] = css[key];\r\n      else elm.style[flat(key)] = css[key];\r\n\r\n  // under construction\r\n  // elm.refresh = function () {\r\n  //   if (refresh) {\r\n  //     const { request, data, callback } = refresh;\r\n  //     if (typeof data === \"function\") data = data();\r\n  //     jcall(request)\r\n  //       .launch(data)\r\n  //       .then(res => {\r\n  //         callback(undefined, res);\r\n  //       }).catch(e => {\r\n  //         callback(e);\r\n  //       })\r\n  //   }\r\n  // }\r\n\r\n  if (parentElm) parentElm.append(elm);\r\n  return elm;\r\n}\r\n\r\n// gloablly exposed\r\nwindow.eye = eye;\n\nexport { eye as default };\n//# sourceMappingURL=eye.esm.js.map\n","import Qway from \"qway\";\r\nimport eye from \"eyeejs\";\r\n\r\n// will be set to empty functions\r\nconst hmNoop = () => {};\r\n// preparing the Qway functionalities\r\nlet keys = new Qway();\r\n\r\n/**\r\n * @typedef {Object} buttonDef\r\n * @property {string} label text to be displayed on the button\r\n * @property {string} type possible types `button`(def) `separator` `radio` `check` `img` `input`\r\n * @property {(buttonDef)=>} func callback to be executed when button clicked\r\n * @property {string} name obliged for radio element, to maintain the relation between\r\n * @property {string} allowed specify the allowed values within a dataset button\r\n * @property {string} def definition text of a `definition` button\r\n * @property {string} accelerator command or combo that perform the same task as the button `ctrl+v` `ctrl+shift+h`...\r\n * @property {Array<number,number>} range Defines a `slider` value range [5,150], [80,120], [0,50]..\r\n * @property {number} step the value used when stepping a `slider`, for each click the value increase or decrease by `step`\r\n * @property {string} format a way to display the value on button, a string that must contain _value_ that will be replaced by the actual value\r\n * @property {boolean} wheel whether or not to include wheel action for `slider`s\r\n * @property {string} src the source of a `img-preview` button\r\n * @property {boolean} default set as radio element default value\r\n * @property {Array<buttonDef>} submenu a submenu element for that button\r\n * @property {boolean} disabled whether or not button is disabled by default\r\n * @property {string} icon optionally set an icon for the button\r\n */\r\n\r\n/**\r\n * @typedef {Object} menuProperties\r\n * @property {HTMLElement} target the target element that supposed to launch the menu\r\n * @property {string} action the action that will trigger menu appearance\r\n * @property {number|Array<number>} bars makes some spaces inside the menu in top and bottom\r\n * @property {string} id possible ID to set the menu\r\n * @property {number|Array<number>} spacing defines the buttons spacing, indenting and revindenting\r\n * @property {Object} stickto Optionally set menu to appear next to an element `stickto.elm` or `stickto` directly\r\n * @property {HTMLElement} stickto.elm the element to stick to\r\n * @property {string} stickto.pos possibly takes `after` `before` `under` `above`\r\n * @property {number} stickto.closerBy offsetting the menu closer to the stickto.elm by certain value\r\n */\r\n\r\nlet namelssCounter = 0;\r\n\r\n/**\r\n * Creates and handle context menu with ease\r\n * @author Yousef Neji\r\n * @param {Array<buttonDef>} def\r\n */\r\nfunction HandyMenue(def) {\r\n  /**\r\n   * Defintion object\r\n   * @type {Array<buttonDef>}\r\n   */\r\n  this.def = def;\r\n\r\n  /**\r\n   * Properties of the menu\r\n   * @type {menuProperties}\r\n   */\r\n  this.props = {};\r\n\r\n  /**\r\n   * Flag determines whether menu is opened or not\r\n   * @type {boolean}\r\n   */\r\n  this.on = false;\r\n\r\n  /**\r\n   * Actual html menu element\r\n   * @type {HTMLDivElement}\r\n   */\r\n  this.elm = null;\r\n\r\n  /**\r\n   * Target is the element that supposed to launch/popup the menu\r\n   * @type {HTMLElement}\r\n   */\r\n  this.target = window;\r\n\r\n  /**\r\n   * Reference to the radio elements used\r\n   */\r\n  this.radios = {};\r\n\r\n  /**\r\n   * Reference to the submenus elements used\r\n   * @type {Array<HandyMenue>}\r\n   */\r\n  this.submenus = [];\r\n\r\n  /**\r\n   * Values auto detected to configure the menu, please don't modify it otherwise menu we appear as expected\r\n   */\r\n  this.computed = {\r\n    menuHeight: 0,\r\n    menuWidth: 0,\r\n    parent: null,\r\n  };\r\n\r\n  /**\r\n   * Used to prevent user interactions while menu opened\r\n   * @type {import(\"eyeejs\").EyeElement}\r\n   */\r\n  this.untouchable = null;\r\n}\r\n\r\nHandyMenue.prototype = {\r\n  /**\r\n   * Initiation phase\r\n   * @param {menuProperties} props\r\n   */\r\n  init: function (props) {\r\n    if (!props) props = {};\r\n    let {\r\n        target = window,\r\n        action = \"contextmenu\",\r\n        bars = 5,\r\n        spacing = 30,\r\n        parent = null,\r\n        stickto = null,\r\n      } = props,\r\n      _this = this;\r\n\r\n    this.target = target ?? window;\r\n    this.computed.parent = parent;\r\n    this.props = {\r\n      target,\r\n      action,\r\n      bars,\r\n      spacing,\r\n      stickto,\r\n    };\r\n\r\n    if (parent) this.untouchable = parent.untouchable;\r\n    else {\r\n      this.untouchable = eye(\"div\", {\r\n        class: \"handy-untouchable\",\r\n        parent: document.body,\r\n      });\r\n      this.untouchable.mousedown(function () {\r\n        _this.close();\r\n      });\r\n    }\r\n\r\n    this.create();\r\n    this.bindEvents();\r\n    this.compute();\r\n  },\r\n  /**\r\n   * Bind different events\r\n   */\r\n  bindEvents: function () {\r\n    let actions = (this.props.action ?? \"contextmenu\").split(\" \");\r\n    let _this = this;\r\n\r\n    actions.forEach((action) => {\r\n      _this.target.addEventListener(action, function (e) {\r\n        e.preventDefault();\r\n        _this.popup({ x: e.clientX, y: e.clientY });\r\n      });\r\n    });\r\n  },\r\n  /**\r\n   * Create the menu\r\n   */\r\n  create: function () {\r\n    let elm = eye(\"div\", {\r\n        class: [\"handy-menu\", \"unselect\"],\r\n        parent: document.body,\r\n      }),\r\n      _this = this;\r\n    this.elm = elm;\r\n\r\n    // include some bar spacings\r\n    let topBar = 0,\r\n      botBar = 0;\r\n    if (typeof this.props.bars == \"number\") topBar = botBar = this.props.bars;\r\n    else if (Array.isArray(this.props.bars)) {\r\n      topBar = this.props.bars[0];\r\n      botBar = this.props.bars[1];\r\n    }\r\n    elm.css(\"padding-top\", topBar + \"px\");\r\n    elm.css(\"padding-bottom\", botBar + \"px\");\r\n\r\n    // hide by default\r\n    this.elm.css(\"display\", \"none\");\r\n\r\n    // creating buttons\r\n    this.def.forEach((button) => {\r\n      _this.addButton(button);\r\n    });\r\n  },\r\n  /**\r\n   * Add new button to the menu\r\n   * @param {buttonDef} button\r\n   */\r\n  addButton: function (button) {\r\n    let type = (button.type = button.type ?? \"button\"),\r\n      label = (button.label = button.label ?? \"\"),\r\n      func = (button.func = button.func ?? hmNoop),\r\n      accelerator = (button.accelerator = button.accelerator ?? \"\"),\r\n      name = (button.name = button.name ?? \"\"),\r\n      deflt = (button.default = button.default ?? null),\r\n      submenu = (button.submenu = button.submenu ?? null),\r\n      range = (button.range = button.range ?? [0, 100]),\r\n      step = (button.step = button.step ?? 1),\r\n      format = (button.format = button.format ?? \"_value_\"),\r\n      icon = (button.icon = button.icon ?? null),\r\n      disabled = (button.disabled = button.disabled ?? false),\r\n      definition = (button.def = button.def ?? \"\"),\r\n\r\n      _this = this,\r\n      spacing = this.props.spacing,\r\n      wheel = this.props.wheel ?? true,\r\n      head = null,\r\n      body = null,\r\n      tail = null,\r\n      checkBoxMark = null;\r\n    let elm = eye(\"div\", { class: \"handy-menu-item\", parent: this.elm });\r\n    elm.refer(\"definition\", button);\r\n\r\n    // attaching some accelerators\r\n    if (accelerator)\r\n      keys.bind(accelerator, function () {\r\n        elm.click();\r\n      });\r\n\r\n    if (type === \"separator\") {\r\n      // separators have special designs\r\n      elm.class(\"+separator\");\r\n      elm.text(label);\r\n    } else {\r\n      // for other buttons they are generally made of some parts\r\n      let fSpace = Array.isArray(spacing) ? spacing[0] : spacing,\r\n        lSpace = Array.isArray(spacing) ? spacing[1] : spacing;\r\n\r\n      head = eye(\r\n        \"div\",\r\n        { parent: elm },\r\n        { width: `${fSpace}px`, backgroundImage: icon ? `url(${icon})` : \"\" }\r\n      );\r\n      body = eye(\"div\", { parent: elm });\r\n      tail = eye(\"div\", { parent: elm }, { width: `${lSpace}px` });\r\n\r\n      let bodyLabel = eye(\"div\", { parent: body, text: label });\r\n      let bodyAccel = eye(\"div\", { parent: body, text: accelerator });\r\n      let submenuElm = null;\r\n\r\n      // special button configurations\r\n\r\n      /////////////////// sub menu configurations\r\n      if (type === \"submenu\") {\r\n        bodyAccel.class(\"+handy-menu-item-arrow\");\r\n        submenuElm = handy(submenu, {\r\n          action: \"none\", // pass anything so no event is assigned\r\n          parent: this,\r\n          stickto: elm,\r\n        });\r\n        this.submenus.push(submenuElm);\r\n\r\n        elm.mouseleave(function () {\r\n          if (this.tm) clearTimeout(this.tm);\r\n        });\r\n      }\r\n\r\n      elm.mouseenter(function () {\r\n        // closing any opened tree\r\n        for (let i = 0; i < _this.submenus.length; i++) {\r\n          _this.submenus[i].close();\r\n        }\r\n        if (type === \"submenu\") {\r\n          this.tm = setTimeout(function () {\r\n            let p = tail.getBoundingClientRect();\r\n            // lock current menu\r\n            submenuElm.popup({ x: p.left + p.width - 3, y: p.top });\r\n          }, 500);\r\n        }\r\n      });\r\n\r\n      /////////////////// CHECK-BOX configurations\r\n      if (type === \"check-box\") {\r\n        label = Array.isArray(label) ? label : [label, label];\r\n        bodyLabel.text(label[0]);\r\n        checkBoxMark = eye(\"div\", { class: \"handy-check-box-mark\" });\r\n      }\r\n\r\n      /////////////////// RADIO-BUTTON configurations\r\n      if (type === \"radio-button\") {\r\n        if (!name)\r\n          throw new Error(\r\n            \"HandyeMenue Error:\\n Radio boxes buttons definition must contain name attribute!\"\r\n          );\r\n        if (!this.radios[name]) {\r\n          this.radios[name] = {\r\n            ball: eye(\"div\", { class: \"handy-radio-button-mark\" }),\r\n          };\r\n          head.append(this.radios[name].ball);\r\n        }\r\n\r\n        if (deflt === true) head.append(this.radios[name].ball);\r\n      }\r\n\r\n      /////////////////// DEFINITION configurations\r\n      if (type === \"definition\") {\r\n        let defBloc = eye(\r\n          \"div\",\r\n          { class: \"handy-definition-box\", parent: document.body, html: definition },\r\n          { display: \"none\" }\r\n        );\r\n        bodyAccel.text(\"definition\");\r\n        elm.mouseenter(function () {\r\n          let b = this.getBoundingClientRect();\r\n          let x = b.left + b.width + 5,\r\n            y = b.top;\r\n          if (window.innerWidth - (b.left + b.width) < 200) x = b.left - 205;\r\n\r\n          defBloc\r\n            .css(\"left\", `${x}px`)\r\n            .css(\"top\", `${y}px`)\r\n            .css(\"display\", \"inline-block\");\r\n        });\r\n        elm.mouseleave(function () {\r\n          defBloc.css(\"display\", \"none\");\r\n        });\r\n      }\r\n\r\n      if (disabled === true) {\r\n        elm.css(\"background-color\", \"transparent\");\r\n        elm.css(\"color\", \"gray\");\r\n        elm.css(\"pointer-action\", \"none\");\r\n        elm.css(\"cursor\", \"default\");\r\n      }\r\n\r\n      if (type === \"slider\") {\r\n        // creating the slider UI\r\n        elm.class(\"+handy-slider\");\r\n        bodyAccel.class(\"+handy-slider-btns\");\r\n        let decrease = eye(\"div\", {\r\n          class: \"handy-slider-btn\",\r\n          parent: bodyAccel,\r\n        });\r\n        let show = eye(\"div\", {\r\n          class: \"handy-slider-show\",\r\n          parent: bodyAccel,\r\n        });\r\n        let increase = eye(\"div\", {\r\n          class: \"handy-slider-btn\",\r\n          parent: bodyAccel,\r\n        });\r\n\r\n        // the plus and minus icons\r\n        let minus = eye(\"div\", { class: \"handy-minus\", parent: decrease });\r\n        let incrs = eye(\"div\", { class: \"handy-plus1\", parent: increase });\r\n        let decrs = eye(\"div\", { class: \"handy-plus2\", parent: increase });\r\n\r\n        show.refer(\"value\", deflt || range[0]);\r\n        show.text(format.replace(\"_value_\", show.refer(\"value\")));\r\n\r\n        // actual work\r\n        decrease.click(function () {\r\n          show.refer(\"value\", Math.max(show.refer(\"value\") - step, range[0]));\r\n          show.text(format.replace(\"_value_\", show.refer(\"value\")));\r\n          func(show.refer(\"value\"), button, elm);\r\n        });\r\n        increase.click(function () {\r\n          show.refer(\"value\", Math.min(show.refer(\"value\") + step, range[1]));\r\n          show.text(format.replace(\"_value_\", show.refer(\"value\")));\r\n          func(show.refer(\"value\"), button, elm);\r\n        });\r\n\r\n        if (wheel === true) {\r\n          elm.on(\"wheel\", function (e) {\r\n            e.preventDefault();\r\n            if (e.deltaY >= 0) decrease.click();\r\n            else increase.click();\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (type === \"submenu\") {\r\n      // creating a whole new menu\r\n    } else {\r\n      elm.click(function (e) {\r\n        let close = true;\r\n\r\n        let { type, disabled } = this.refer(\"definition\");\r\n\r\n        if (disabled === true || [\"slider\", \"separator\"].indexOf(type) != -1)\r\n          return;\r\n        if (type == \"button\") close = func(elm, button, e);\r\n        else if (type == \"check-box\") {\r\n          // toggling check box\r\n          if (this.selected === true) {\r\n            this.selected = false;\r\n            checkBoxMark.remove();\r\n            body.child(0).text(label[0]);\r\n          } else {\r\n            this.selected = true;\r\n            head.append(checkBoxMark);\r\n            body.child(0).text(label[1]);\r\n          }\r\n          close = func(this.selected, elm, button);\r\n        } else if (type == \"radio-button\") {\r\n          let call = _this.radios[name];\r\n          if (call.ball) head.append(call.ball);\r\n          close = func(label, elm, button);\r\n        }\r\n        if (!(close === false)) _this.close(true);\r\n      });\r\n    }\r\n  },\r\n  /**\r\n   *\r\n   * @param {Object} pos the position in which to popup in\r\n   * @param {number} pos.x x coordination\r\n   * @param {number} pos.y y coordination\r\n   */\r\n  popup: function (pos) {\r\n    let { x, y } = pos;\r\n    let stickto = this.props.stickto;\r\n\r\n    if (\r\n      stickto != null &&\r\n      (stickto instanceof HTMLElement || stickto.elm instanceof HTMLElement)\r\n    ) {\r\n      // perform stick display\r\n      let { pos = \"after\", closerBy = 2 } = stickto;\r\n      let box = (\r\n        stickto instanceof HTMLElement ? stickto : stickto.elm\r\n      ).getBoundingClientRect();\r\n\r\n      // some adjustments\r\n      if (\r\n        pos === \"after\" &&\r\n        box.left + box.width + this.computed.menuWidth > window.innerWidth\r\n      )\r\n        pos = \"before\";\r\n\r\n      // apply position\r\n      if (pos === \"after\") {\r\n        x = box.left + box.width + 2 - closerBy;\r\n        y = box.top;\r\n      } else if (pos === \"before\") {\r\n        x = box.left - this.computed.menuWidth - 2 + closerBy;\r\n        y = box.top;\r\n      } else if (pos == \"under\") {\r\n        x = box.left;\r\n        y = box.top;\r\n      }\r\n    } else {\r\n      // if no stick option then perform normal position calculations\r\n      if (y + this.computed.menuHeight > window.innerHeight - 20)\r\n        y = window.innerHeight - (20 + this.computed.menuHeight);\r\n\r\n      if (x + this.computed.menuWidth > window.innerWidth - 20)\r\n        x = window.innerWidth - (20 + this.computed.menuWidth);\r\n    }\r\n\r\n    // finally apply style\r\n    this.elm.css(\"left\", x + \"px\");\r\n    this.elm.css(\"top\", y + \"px\");\r\n    this.elm.css(\"position\", \"fixed\");\r\n    this.elm.css(\"display\", \"inline-block\");\r\n    this.untouchable.show(\"inline-block\");\r\n  },\r\n  /**\r\n   * Close the menu\r\n   * @param {boolean} closeAllMenu\r\n   * @returns\r\n   */\r\n  close: function (closeAllMenu) {\r\n    if (closeAllMenu && this.computed.parent)\r\n      return this.computed.parent.close(true); // this will start closing the total menu\r\n\r\n    if (this.submenus.length != 0) {\r\n      this.submenus.forEach((submenu) => submenu.close());\r\n    }\r\n    this.elm.css(\"display\", \"none\");\r\n    if (!this.computed.parent) this.untouchable.hide();\r\n  },\r\n  /**\r\n   * Perform some computation tasks registering some values\r\n   * @method HandyeMenue#compute\r\n   */\r\n  compute: function () {\r\n    // perform some need calculations\r\n\r\n    // away from the screen\r\n    this.elm.css(\"left\", -9999);\r\n    this.elm.css(\"position\", \"fixed\");\r\n    this.elm.css(\"display\", \"inline-block\");\r\n\r\n    let declaration = this.elm.getBoundingClientRect();\r\n    this.computed.menuHeight = declaration.height;\r\n    this.computed.menuWidth = declaration.width;\r\n\r\n    this.elm.css(\"display\", \"none\");\r\n  },\r\n  /**\r\n   * Hide the button at the give index\r\n   * @param {number} index\r\n   */\r\n  hideButton: function (index) {\r\n    if (this.elm.child(index)) this.elm.child(index).hide();\r\n  },\r\n  /**\r\n   * Show the button at the give index\r\n   * @param {number} index\r\n   */\r\n  showButton: function (index) {\r\n    if (this.elm.child(index)) this.elm.child(index).show();\r\n  },\r\n  /**\r\n   * Toggle button activation\r\n   * @param {number} index\r\n   * @param {boolean} force\r\n   */\r\n  toggleButton: function (index, force) {\r\n    if (this.elm.child(index)) {\r\n      let button = this.elm.child(index);\r\n      if (typeof force != \"boolean\") {\r\n        force = !(button.refer(\"definition\").disabled == true);\r\n      }\r\n\r\n      if (force === true) {\r\n        button.refer(\"definition\").disabled = true;\r\n        button.css(\"background-color\", \"transparent\");\r\n        button.css(\"color\", \"gray\");\r\n        button.css(\"pointer-action\", \"none\");\r\n        button.css(\"cursor\", \"default\");\r\n      } else {\r\n        button.refer(\"definition\").disabled = false;\r\n        button.removeAttribute(\"style\");\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n/**\r\n * Create a new context menu\r\n * @param {Array<buttonDef>} def\r\n * @param {menuProperties} props\r\n * @returns {HandyMenue}\r\n */\r\nfunction handy(def, props) {\r\n  if (!def) throw new Error(\"Menu definiton must be provided!\");\r\n  let menu = new HandyMenue(def);\r\n  menu.init(props);\r\n\r\n  return menu;\r\n}\r\n\r\n// the css file must be included\r\nconsole.warn(\r\n  \"Don't forget to link the css file bundled with the library to get full functional menus!\"\r\n);\r\n\r\nexport default handy;\r\n"],"names":["Qway","duplicates","_this","this","shortcutslist","combo","holdingActions","KEYS","shortcutActivated","comboActivated","intercativeMode","toBuild","QEF","keysuite","window","addEventListener","e","handleKeydown","call","handleKeyup","blur","undefined","findIndex","Array","prototype","callback","res","i","length","element","out","approve","shortcut","join","bind","approveToReplace","obj","find","a","toString","exist","check","unbind","abort","resetCombo","supervise","index","progress","done","toggleCombo","state","active","toggleShortcut","replace","getFromUser","shortcutLength","func1","push","stopGettingFromUser","key","toLowerCase","trim","forEach","item","indexOf","timeout","clearTimeout","j","preventDefault","setTimeout","timing","splice","lastIndexOf","duration","shortcuti","fill","console","warn","findANDdeleted","action","error","split","times","parseFloat","name","pack","initiate","events","htmlElements","hiddenAttributes","WeakMap","flat","word","n","t","toUpperCase","eye","tag","attrs","css","children","elm","selectFunc","parent","Window","document","HTMLElement","all","NodeList","nd","isEyeInstance","set","value","args","arg","val","dataset","setAttribute","style","class","actions","vals","classList","remove","substring","toggle","contains","v1","v2","add","show","set_to","display","hide","child","refer","attr","get","unrefer","subfind","arr","ev","old","cb","on","evs","listener","appendTo","append","getAttribute","removeAttribute","data","text","textContent","html","innerHTML","parentElm","apply","k","hmNoop","keys","HandyMenue","def","props","target","radios","submenus","computed","menuHeight","menuWidth","untouchable","handy","Error","menu","init","bars","spacing","stickto","body","mousedown","close","create","bindEvents","compute","popup","x","clientX","y","clientY","topBar","botBar","isArray","button","addButton","type","label","func","accelerator","deflt","default","submenu","range","step","format","icon","disabled","definition","wheel","head","tail","checkBoxMark","click","fSpace","lSpace","width","backgroundImage","bodyLabel","bodyAccel","submenuElm","mouseleave","tm","mouseenter","p","getBoundingClientRect","left","top","ball","defBloc","b","innerWidth","decrease","increase","Math","max","min","deltaY","selected","pos","closerBy","box","innerHeight","closeAllMenu","declaration","height","hideButton","showButton","toggleButton","force"],"mappings":"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,OAAQD,IAC7CxB,KAAKC,cAAcuB,GAAGoB,SAAS4B,MAC7B,EACA,EACAxE,KAAKC,cAAcuB,GAAGoB,SAASnB,QAGnC,IAAK,IAAID,EAAI,EAAGA,EAAIxB,KAAKE,MAAMuB,OAAQD,IACrCxB,KAAKE,MAAMsB,GAAGoB,SAAW,GAE3B,IAAK,IAAIpB,EAAI,EAAGA,EAAIxB,KAAKG,eAAesB,OAAQD,IACP,OAAnCxB,KAAKG,eAAeqB,GAAGsC,UACzBC,aAAa/D,KAAKG,eAAeqB,GAAGsC,SACpC9D,KAAKG,eAAeqB,GAAGsC,QAAU,MAIrC9D,KAAKO,iBAAkB,EACvBP,KAAKQ,QAAU,CAAC,GAAI,GACrB,GCp6BH,MAAM4E,EAAS,CAEb,QACA,WACA,YACA,UACA,YACA,aACA,aACA,YACA,WACA,cAGA,UACA,WACA,QAGA,QACA,OACA,UACA,WAGA,SACA,SACA,QACA,QACA,SAGA,aACA,WACA,YACA,cAGA,cACA,YACA,cACA,eACA,eACA,gBAGA,YACA,UACA,YACA,WACA,YACA,OAGA,SACA,SACA,OACA,eACA,SAGA,OACA,QACA,QACA,eACA,aAGA,OACA,MACA,QAGA,iBACA,eACA,qBACA,kBACA,gBAGA,qBACA,kBACA,iBAGA,QACA,aACA,YAGIC,EAAe,CAEnB,OACA,OACA,OACA,OACA,QACA,QAGA,OACA,UACA,UACA,QACA,SACA,SACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,MACA,UAGA,aACA,KACA,MACA,KACA,KACA,aACA,SACA,KACA,KACA,KACA,IACA,MACA,KAGA,IACA,OACA,IACA,MACA,MACA,KACA,OACA,OACA,OACA,MACA,KACA,IACA,MACA,OACA,IACA,KACA,KACA,OACA,IACA,OACA,QACA,OACA,SACA,MACA,MACA,OACA,IACA,MACA,MAGA,OACA,QACA,MACA,MACA,QACA,QAGA,QACA,SACA,SACA,UACA,SACA,SAGA,SACA,WACA,SAGA,MACA,MAGA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KAGA,SACA,WACA,WA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","x_google_ignoreList":[0,1]}