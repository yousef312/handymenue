{"version":3,"file":"eye.umd.min.js","sources":["../src/eye.js"],"sourcesContent":["\n/**\n * @typedef {Object} AttrMap\n * @property {HTMLDivElement} parent - append newly created element to a parent\n * @property {Array<String>|String} class - class or array of classes to set\n * @property {String} id - set element ID\n * @property {Object} data - dataset values to set\n * @property {String} text - set element text\n * @property {String} html - set element html\n */\n\n/**\n * @typedef {Object} EyeElement eye element definition\n * @property {(tag: String, attrs: AttrMap) => EyeElement} eye - The main function to create or select elements.\n * @property {(set_to?: string) => EyeElement} show - Show the element, optional customize the display value, inline-bloc, bloc.... .\n * @property {() => EyeElement} hide - Hide the element.\n * @property {(index: number) => EyeElement} child - Function to get a child element by index.\n * @property {(key: String, value: *) => EyeElement} refer - Set or get a hidden WeakMap attributes\n * @property {(key: String, subfind: number) => EyeElement} unrefer - Remove/unset a WeakMap attributes, optionally `subfind` it if array is set!\n * @property {(event: String, callback: Function) => EyeElement} on - Attach an event listener to `event`\n * @property {(parent: HTMLElement) => EyeElement} appendTo - Append this element to an other\n * @property {(key: String, value: String) => EyeElement|String} attr - Set or get a value of certain attribute\n * @property {(key: String, value: String) => EyeElement|string} css - Modify or get element style\n * @property {(key: string, value: string) => DOMStringMap|string} data - Set or get a dataset value of the attribute\n * @property {(value: String) => EyeElement|string} text - Set or get elements text content\n * @property {(value: String) => EyeElement|string} html - Set or get elements html content\n * @property {Function} [eventName] - Functions for various events (e.g., click, focus, etc.).\n * @property {boolean} isEyeInstance - Flag to check if the element is an Eye instance.\n * @property {(action: String, value: String, opt?: String) => boolean} class - perform class manipulation\n */\n\n/**\n * @typedef {EyeElement & {\n *  refresh: (attrs: AttrMap) => ModelEyeElement\n * }} ModelEyeElement eye element definition for model elements\n */\n\nconst events = [\n  // Mouse Events\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseup\",\n  \"mousemove\",\n  \"mouseenter\",\n  \"mouseleave\",\n  \"mouseover\",\n  \"mouseout\",\n  \"contextmenu\",\n\n  // Keyboard Events\n  \"keydown\",\n  \"keypress\", // Deprecated\n  \"keyup\",\n\n  // Focus Events\n  \"focus\",\n  \"blur\",\n  \"focusin\",\n  \"focusout\",\n\n  // Form Events\n  \"submit\",\n  \"change\",\n  \"input\",\n  \"reset\",\n  \"select\",\n\n  // Touch Events (for mobile)\n  \"touchstart\",\n  \"touchend\",\n  \"touchmove\",\n  \"touchcancel\",\n\n  // Pointer Events\n  \"pointerdown\",\n  \"pointerup\",\n  \"pointermove\",\n  \"pointerenter\",\n  \"pointerleave\",\n  \"pointercancel\",\n\n  // Drag and Drop Events\n  \"dragstart\",\n  \"dragend\",\n  \"dragenter\",\n  \"dragover\",\n  \"dragleave\",\n  \"drop\",\n\n  // Window/Document Events\n  \"resize\",\n  \"scroll\",\n  \"load\",\n  \"beforeunload\",\n  \"unload\",\n\n  // Media Events\n  \"play\",\n  \"pause\",\n  \"ended\",\n  \"volumechange\",\n  \"timeupdate\",\n\n  // Clipboard Events\n  \"copy\",\n  \"cut\",\n  \"paste\",\n\n  // Animation and Transition Events\n  \"animationstart\",\n  \"animationend\",\n  \"animationiteration\",\n  \"transitionstart\",\n  \"transitionend\",\n\n  // Mutation Events\n  \"DOMSubtreeModified\",\n  \"DOMNodeInserted\",\n  \"DOMNodeRemoved\",\n\n  // Other Events\n  \"error\",\n  \"hashchange\",\n  \"popstate\",\n];\nconst triggerableEvents = [\"click\", \"focus\", \"blur\", \"play\", \"pause\", \"submit\"];\n\nconst htmlElements = [\n  // Metadata\n  \"base\",\n  \"head\",\n  \"link\",\n  \"meta\",\n  \"style\",\n  \"title\",\n\n  // Sections\n  \"body\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"main\",\n  \"nav\",\n  \"section\",\n\n  // Text content\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n\n  // Inline text semantics\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n\n  // Image and multimedia\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n\n  // Embedded content\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"picture\",\n  \"portal\",\n  \"source\",\n\n  // Scripting\n  \"canvas\",\n  \"noscript\",\n  \"script\",\n\n  // Demarcating edits\n  \"del\",\n  \"ins\",\n\n  // Table content\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n\n  // Forms\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n\n  // Interactive elements\n  \"details\",\n  \"dialog\",\n  \"summary\",\n\n  // Web components / scripting base\n  \"slot\",\n  \"template\",\n];\nconst hiddenAttributes = new WeakMap();\n\nfunction flat(word) {\n  let n = \"\";\n  for (let i = 0; i < word.length; i++) {\n    const t = word[i];\n    if (t === t.toUpperCase() && t !== t.toLowerCase()) n += \"-\" + t;\n    else n += t;\n  }\n  return n.toLowerCase();\n}\n\n/**\n * cmcl stands for Create Model Children Layers, recursively creates model layers one by one\n * @param {EyeElement} parent\n * @param {Object} layer\n * @returns {Array<{name: string,set: (parent: EyeElement, value: String) =>}>}\n */\nfunction cmcl(parent, layer) {\n  let obj = [];\n  for (const key in layer) {\n    const subcontent = layer[key];\n    const [def, _set] = key.split(\":\");\n    const [tagName, ...cls] = def.split(\".\");\n    let [_set_name = null, _set_default = null] = (_set || \"\")\n      .split(\"-\")\n      .map((a) => a.trim());\n\n    let elm = eye(tagName.trim(), {\n      class: cls,\n      parent,\n      data: _set ? { value: _set_name } : undefined,\n    });\n\n    if (_set && _set_name) {\n      obj.push({\n        name: _set_name,\n        set: function (parent, value) {\n          let elm = parent.querySelector(`[data-value=\"${_set_name}\"]`);\n          elm.textContent = value ?? _set_default;\n        },\n      });\n    }\n\n    // recursive\n    if (\n      subcontent &&\n      typeof subcontent === \"object\" &&\n      !(subcontent instanceof Array)\n    )\n      obj = obj.concat(cmcl(elm, subcontent));\n  }\n  return obj;\n}\n\n/**\n * Creates or select nodes using css selectors, offering a pack of useful functions to use around your code!\n * @param {String} tag\n * @param {AttrMap} attrs\n * @param {*} css CSS styles to be applied to the element.\n * @returns {EyeElement|(attrs: AttrMap) => ModelEyeElement|Array<>}\n */\nfunction eye(tag, attrs, css) {\n  if (css instanceof Array) children = css;\n  /**\n   * @type {EyeElement}\n   */\n  let elm,\n    selectFunc = \"querySelector\",\n    parent = this === undefined || this instanceof Window ? document : this;\n\n  if (tag instanceof HTMLElement) elm = tag;\n  else {\n    if (tag.indexOf(\"model:\") === 0) {\n      if (!attrs) throw new Error(\"Model tag must have attributes!\");\n      tag = tag.split(\":\")[1];\n      // creating a model\n      let model = eye(\"div\", {\n        class: [\"eye-model\", tag],\n        \"data-model\": tag,\n        \"data-eye-model\": tag,\n      });\n\n      let sets = cmcl(model, attrs);\n\n      /**\n       * @param {string} attrs\n       * @returns {ModelEyeElement}\n       */\n      return (attrs) => {\n        let copy = eye(model.cloneNode(true), attrs);\n        // define & attach the refresh function\n        copy.refresh = function (attrs = {}) {\n          let def = attrs.default === false ? false : true;\n          sets.forEach((item) => {\n            if (def === true || (!def && attrs.hasOwnProperty(item.name)))\n              item.set(copy, attrs[item.name]);\n          });\n          return this;\n        };\n\n        copy.refresh(attrs);\n        return eye(copy, attrs);\n      };\n    }\n    // there is three cases\n    if (attrs && attrs.all === true)\n      // CASE 1: parent is not docuement & all=true\n      selectFunc = \"querySelectorAll\";\n    if (parent == document && htmlElements.indexOf(tag) != -1)\n      // CASE 3: parent is document & user input a tag name\n      selectFunc = \"createElement\";\n\n    elm = parent[selectFunc](tag);\n  }\n\n  if (elm instanceof NodeList) {\n    elm.forEach((nd) => eye(nd));\n    // for nodelist there's some other available functions\n    return [...elm];\n  }\n\n  if (!elm) return null;\n  if (elm.isEyeInstance) return elm;\n\n  elm.isEyeInstance = true;\n  // adding a very special function\n  elm.eye = eye;\n\n  // adding the element itself\n  // usuage:\n  // item.set(\"id=menu-item\",\"contentEditable=true\",\"data-index=15\",...);\n  elm.set = function (value, ...args) {\n    args.push(value);\n    args.forEach((arg) => {\n      if (arg.indexOf(\"=\") != -1) {\n        const [key, val] = arg.split(\"=\");\n        if (key.indexOf(\"data-\") === 0) {\n          this.dataset[flat(key.replace(\"data-\", \"\"))] = val;\n        } else {\n          this.setAttribute(key, val);\n        }\n      } else if (arg.indexOf(\":\") != -1) {\n        const [key, val] = arg.split(\":\");\n        this.style[flat(key)] = val;\n      } else this.setAttribute(arg, \"\");\n    });\n\n    return this;\n  };\n\n  elm.class = function (actions) {\n    let vals = null;\n    if (typeof actions === \"number\") return elm.classList.item(actions);\n\n    actions.split(\" \").forEach((action) => {\n      if (action[0] == \"-\") {\n        elm.classList.remove(action.substring(1, action.length));\n      } else if (action[0] == \"%\") {\n        elm.classList.toggle(action.substring(1, action.length));\n      } else if (action[0] == \"?\") {\n        vals = elm.classList.contains(action.substring(1, action.length));\n      } else if (action.indexOf(\"/\") != -1) {\n        [v1, v2] = action.split(\"/\");\n        elm.classList.replace(v1, v2);\n      } else {\n        elm.classList.add(action.substring(1, action.length));\n      }\n    });\n\n    return vals !== null ? vals : this;\n  };\n\n  elm.show = function (set_to) {\n    this.style.display = set_to || \"\";\n    return this;\n  };\n\n  elm.hide = function () {\n    this.style.display = \"none\";\n    return this;\n  };\n\n  elm.child = function (index) {\n    return this.children[index] ? eye(this.children[index]) : null;\n  };\n\n  elm.refer = function (key, value) {\n    if (value !== undefined) {\n      let attr = hiddenAttributes.get(this);\n      if (!attr) {\n        attr = {};\n        hiddenAttributes.set(this, attr);\n      }\n\n      // now a small check\n      if (value instanceof Array) {\n        // if value is instance of array means we're defining an array property of adding to one\n        if (attr[key] instanceof Array) attr[key].push(value[0]);\n        else attr[key] = [value[0]];\n      } else attr[key] = value;\n      return this;\n    } else return hiddenAttributes.get(this)?.[key];\n  };\n  elm.unrefer = function (key, subfind) {\n    let attr = hiddenAttributes.get(this);\n    if (attr) {\n      if (!subfind && typeof key === \"string\" && attr[key])\n        attr[key] = undefined;\n      else if (typeof subfind === \"function\" && attr[key] instanceof Array)\n        attr[key].forEach((item, i, arr) => {\n          if (subfind(item) === true) {\n            arr.splice(i, 1);\n            i--;\n          }\n        });\n    }\n\n    return this;\n  };\n\n  // re-assinging events handling system\n  events.forEach((ev) => {\n    var old;\n    if (typeof elm[ev] == \"function\") {\n      old = elm[ev];\n    }\n    elm[ev] = function (cb) {\n      if (cb) {\n        if (typeof cb == \"function\") elm.addEventListener(ev, cb);\n      } else old.call(elm);\n      return this;\n    };\n  });\n\n  elm.on = function (evs, listener) {\n    evs = evs.split(\" \");\n    for (let j = 0; j < evs.length; j++) elm.addEventListener(evs[j], listener);\n    return this;\n  };\n\n  elm.appendTo = function (parent) {\n    if (parent) parent.append(this);\n    return this;\n  };\n\n  elm.attr = function (key, value) {\n    if (key) {\n      if (value) {\n        if (value === false) this.removeAttribute(key);\n        this.setAttribute(key, value);\n      } else return this.getAttribute(key);\n    }\n    return this;\n  };\n\n  elm.css = function (key, value) {\n    // usuage is wide customizable\n    if (key) {\n      if (value) elm.style[flat(key)] = value;\n      else return this.style[flat(key)];\n    }\n    return this;\n  };\n\n  elm.data = function (key, value) {\n    if (key) {\n      if (value) this.dataset[key] = value;\n      else return this.dataset[key];\n    }\n    return this.dataset;\n  };\n\n  elm.text = function (value) {\n    if (value) this.textContent = value;\n    else return this.textContent;\n    return this;\n  };\n\n  elm.html = function (value) {\n    if (value) this.innerHTML = value;\n    else return this.innerHTML;\n    return this;\n  };\n\n  // setting attributes & css\n  let parentElm = null;\n  if (attrs)\n    for (const key in attrs) {\n      const value = attrs[key];\n      if (key == \"class\")\n        elm.classList.add.apply(\n          elm.classList,\n          value instanceof Array ? value : value.split(\" \")\n        );\n      else if (key == \"text\") elm.textContent = value;\n      else if (key == \"html\") elm.innerHTML = value;\n      else if (key == \"data\") for (const k in value) elm.dataset[k] = value[k];\n      else if (key == \"parent\") parentElm = value;\n      else if (key in elm) elm[key] = value;\n      else if (key[0] != \"_\") elm.setAttribute(key, elm); // we must ignore _ started keys 'cause they are used by models\n    }\n  if (css)\n    for (const key in css)\n      if (key.indexOf(\"-\") != -1) elm.style[key] = css[key];\n      else elm.style[flat(key)] = css[key];\n\n  if (parentElm) parentElm.append(elm);\n  return elm;\n}\n\n// gloablly exposed\nwindow.eye = eye;\nexport default eye;\n"],"names":["events","htmlElements","hiddenAttributes","WeakMap","flat","word","n","i","length","t","toUpperCase","toLowerCase","cmcl","parent","layer","obj","key","subcontent","def","_set","split","tagName","cls","_set_name","_set_default","map","a","trim","elm","eye","class","data","value","undefined","push","name","set","querySelector","textContent","Array","concat","tag","attrs","css","children","selectFunc","this","Window","document","HTMLElement","indexOf","Error","model","sets","copy","cloneNode","refresh","default","forEach","item","hasOwnProperty","all","NodeList","nd","isEyeInstance","args","arg","val","dataset","replace","setAttribute","style","actions","vals","classList","action","remove","substring","toggle","contains","v1","v2","add","show","set_to","display","hide","child","index","refer","attr","get","unrefer","subfind","arr","splice","ev","old","cb","addEventListener","call","on","evs","listener","j","appendTo","append","getAttribute","removeAttribute","text","html","innerHTML","parentElm","apply","k","window"],"mappings":"oOAqCA,MAAMA,EAAS,CAEb,QACA,WACA,YACA,UACA,YACA,aACA,aACA,YACA,WACA,cAGA,UACA,WACA,QAGA,QACA,OACA,UACA,WAGA,SACA,SACA,QACA,QACA,SAGA,aACA,WACA,YACA,cAGA,cACA,YACA,cACA,eACA,eACA,gBAGA,YACA,UACA,YACA,WACA,YACA,OAGA,SACA,SACA,OACA,eACA,SAGA,OACA,QACA,QACA,eACA,aAGA,OACA,MACA,QAGA,iBACA,eACA,qBACA,kBACA,gBAGA,qBACA,kBACA,iBAGA,QACA,aACA,YAIIC,EAAe,CAEnB,OACA,OACA,OACA,OACA,QACA,QAGA,OACA,UACA,UACA,QACA,SACA,SACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,MACA,UAGA,aACA,KACA,MACA,KACA,KACA,aACA,SACA,KACA,KACA,KACA,IACA,MACA,KAGA,IACA,OACA,IACA,MACA,MACA,KACA,OACA,OACA,OACA,MACA,KACA,IACA,MACA,OACA,IACA,KACA,KACA,OACA,IACA,OACA,QACA,OACA,SACA,MACA,MACA,OACA,IACA,MACA,MAGA,OACA,QACA,MACA,MACA,QACA,QAGA,QACA,SACA,SACA,UACA,SACA,SAGA,SACA,WACA,SAGA,MACA,MAGA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KAGA,SACA,WACA,WACA,OACA,QACA,QACA,SACA,QACA,WACA,SACA,SACA,WACA,SACA,WAGA,UACA,SACA,UAGA,OACA,YAEIC,EAAmB,IAAIC,QAE7B,SAASC,EAAKC,GACZ,IAAIC,EAAI,GACR,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAK,CACpC,MAAME,EAAIJ,EAAKE,GACXE,IAAMA,EAAEC,eAAiBD,IAAMA,EAAEE,cAAeL,GAAK,IAAMG,EAC1DH,GAAKG,CACd,CACE,OAAOH,EAAEK,aACX,CAQA,SAASC,EAAKC,EAAQC,GACpB,IAAIC,EAAM,GACV,IAAK,MAAMC,KAAOF,EAAO,CACvB,MAAMG,EAAaH,EA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"}