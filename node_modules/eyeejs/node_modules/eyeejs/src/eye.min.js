const events=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","keydown","keypress","keyup","focus","blur","focusin","focusout","submit","change","input","reset","select","touchstart","touchend","touchmove","touchcancel","pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","dragstart","dragend","dragenter","dragover","dragleave","drop","resize","scroll","load","beforeunload","unload","play","pause","ended","volumechange","timeupdate","copy","cut","paste","animationstart","animationend","animationiteration","transitionstart","transitionend","DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","error","hashchange","popstate"],triggerableEvents=["click","focus","blur","play","pause","submit"],htmlElements=["base","head","link","meta","style","title","body","address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rp","rt","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","area","audio","img","map","track","video","embed","iframe","object","picture","portal","source","canvas","noscript","script","del","ins","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","button","datalist","fieldset","form","input","label","legend","meter","optgroup","option","output","progress","select","textarea","details","dialog","summary","slot","template"],hiddenAttributes=new WeakMap;function flat(t){let e="";for(let n=0;n<t.length;n++){const i=t[n];i===i.toUpperCase()&&i!==i.toLowerCase()?e+="-"+i:e+=i}return e.toLowerCase()}function cmcl(t,e){let n=[];for(const i in e){const s=e[i],[r,o]=i.split(":"),[a,...l]=r.split(".");let[u=null,c=null]=(o||"").split("-").map((t=>t.trim())),d=eye(a.trim(),{class:l,parent:t,data:o?{value:u}:void 0});o&&u&&n.push({name:u,set:function(t,e){t.querySelector(`[data-value="${u}"]`).textContent=e??c}}),!s||"object"!=typeof s||s instanceof Array||(n=n.concat(cmcl(d,s)))}return n}function eye(t,e,n){n instanceof Array&&(children=n);let i,s="querySelector",r=void 0===this||this instanceof Window?document:this;if(t instanceof HTMLElement)i=t;else{if(0===t.indexOf("model:")){if(!e)throw new Error("Model tag must have attributes!");let n=eye("div",{class:["eye-model",t=t.split(":")[1]],"data-model":t,"data-eye-model":t}),i=cmcl(n,e);return t=>{let e=eye(n.cloneNode(!0),t);return e.refresh=function(t={}){let n=!1!==t.default;return i.forEach((i=>{(!0===n||!n&&t.hasOwnProperty(i.name))&&i.set(e,t[i.name])})),this},e.refresh(t),eye(e,t)}}e&&!0===e.all&&(s="querySelectorAll"),r==document&&-1!=htmlElements.indexOf(t)&&(s="createElement"),i=r[s](t)}if(i instanceof NodeList)return i.forEach((t=>eye(t))),[...i];if(!i)return null;if(i.isEyeInstance)return i;i.isEyeInstance=!0,i.eye=eye,i.set=function(t,...e){return e.push(t),e.forEach((t=>{if(-1!=t.indexOf("=")){const[e,n]=t.split("=");0===e.indexOf("data-")?this.dataset[flat(e.replace("data-",""))]=n:this.setAttribute(e,n)}else if(-1!=t.indexOf(":")){const[e,n]=t.split(":");this.style[flat(e)]=n}else this.setAttribute(t,"")})),this},i.class=function(t){let e=null;return"number"==typeof t?i.classList.item(t):(t.split(" ").forEach((t=>{"-"==t[0]?i.classList.remove(t.substring(1,t.length)):"%"==t[0]?i.classList.toggle(t.substring(1,t.length)):"?"==t[0]?e=i.classList.contains(t.substring(1,t.length)):-1!=t.indexOf("/")?([v1,v2]=t.split("/"),i.classList.replace(v1,v2)):i.classList.add(t.substring(1,t.length))})),null!==e?e:this)},i.show=function(t){return this.style.display=t||"",this},i.hide=function(){return this.style.display="none",this},i.child=function(t){return this.children[t]?eye(this.children[t]):null},i.refer=function(t,e){if(void 0!==e){let n=hiddenAttributes.get(this);return n||(n={},hiddenAttributes.set(this,n)),e instanceof Array?n[t]instanceof Array?n[t].push(e[0]):n[t]=[e[0]]:n[t]=e,this}return hiddenAttributes.get(this)?.[t]},i.unrefer=function(t,e){let n=hiddenAttributes.get(this);return n&&(!e&&"string"==typeof t&&n[t]?n[t]=void 0:"function"==typeof e&&n[t]instanceof Array&&n[t].forEach(((t,n,i)=>{!0===e(t)&&(i.splice(n,1),n--)}))),this},events.forEach((t=>{var e;"function"==typeof i[t]&&(e=i[t]),i[t]=function(n){return n?"function"==typeof n&&i.addEventListener(t,n):e.call(i),this}})),i.on=function(t,e){t=t.split(" ");for(let n=0;n<t.length;n++)i.addEventListener(t[n],e);return this},i.appendTo=function(t){return t&&t.append(this),this},i.attr=function(t,e){if(t){if(!e)return this.getAttribute(t);!1===e&&this.removeAttribute(t),this.setAttribute(t,e)}return this},i.css=function(t,e){if(t){if(!e)return this.style[flat(t)];i.style[flat(t)]=e}return this},i.data=function(t,e){if(t){if(!e)return this.dataset[t];this.dataset[t]=e}return this.dataset},i.text=function(t){return t?(this.textContent=t,this):this.textContent},i.html=function(t){return t?(this.innerHTML=t,this):this.innerHTML};let o=null;if(e)for(const t in e){const n=e[t];if("class"==t)i.classList.add.apply(i.classList,n instanceof Array?n:n.split(" "));else if("text"==t)i.textContent=n;else if("html"==t)i.innerHTML=n;else if("data"==t)for(const t in n)i.dataset[t]=n[t];else"parent"==t?o=n:t in i?i[t]=n:"_"!=t[0]&&i.setAttribute(t,i)}if(n)for(const t in n)-1!=t.indexOf("-")?i.style[t]=n[t]:i.style[flat(t)]=n[t];return o&&o.append(i),i}window.eye=eye;export default eye;